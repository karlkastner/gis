\documentclass[11pt,twoside,a4paper]{article}
%{book}

% This is an automatically generated file.
% Do not edit it.
% Changes to this file are not preserved!

\usepackage{tocloft}
\usepackage{hyperref}
\usepackage{listings}
\lstset{
basicstyle=\small\ttfamily,
columns=flexible,
breaklines=true
}
\setlength{\cftsubsecnumwidth}{3.5em}

\title{Manual for Package:
gis\protect\\Revision 1
}
\author{Karl K\"astner}
%\date{}

\begin{document}

\maketitle

\tableofcontents

% licence
% abstract


\section{gis}
\subsection{GPX}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{batavia\_zero}
${}$
\begin{lstlisting}

\end{lstlisting}
\section{centreline/@Centreline}
\subsection{Centreline}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{channel\_planimetry}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{clip}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{connect\_graph}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{curvature}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{cut}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{determine\_width}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{distance}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_cross\_section}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_node}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_shp}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{find\_nearest\_segment}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{from\_polygon}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{from\_shp}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{get}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{init}
${}$
\begin{lstlisting}
obj.seg_S(id(end)) = NaN;

\end{lstlisting}
\subsection{init\_connect}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{init\_node\_D}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{link\_centreline}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{plot}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{plot\_connection}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{prune}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{prune\_leaves}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{prune\_manually}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{reachable}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{remove\_duplicate\_points}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{resample}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{routing}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{routing2}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{shp\_resample\_simple}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{snmesh}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{squeeze}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{trim\_ends}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{weighed\_connection\_matrix}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{xy2sn}
${}$
\begin{lstlisting}

\end{lstlisting}
\section{centreline/@Segment}
\subsection{Segment}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{build\_inverse\_index}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{connectivity\_matrix}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{init\_seg\_id}
${}$
\begin{lstlisting}

\end{lstlisting}
\section{centreline}
\subsection{sn2xy\_quadratic}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{thalweg}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{xy2sn\_quadratic}
${}$
\begin{lstlisting}

\end{lstlisting}
\section{gis}
\subsection{gpx\_export\_csv}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{hgt\_plot}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{hgt\_read}
${}$
\begin{lstlisting}
% [ floor(mednan(z(kk))) meannan(z(kk)) min(z(kk)) max(z(kk)) ]

\end{lstlisting}
\subsection{hgt\_read\_all}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{hgt\_resample}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{nmeatime}
${}$
\begin{lstlisting}

\end{lstlisting}
\section{shapefile/@Shp}
\subsection{Shp}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{area}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{buffer}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{cat}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{clip}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{clip\_rect}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{close\_polygon}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{concat}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{connect\_network}
${}$
\begin{lstlisting}
 TODO make unique
 attach segments to 
XY = [cvec(shp.X),shp.;
 knnsearch for nearest n neighbours
 for each segment

\end{lstlisting}
\subsection{contour}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{cp}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{create}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{curvature}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{cut}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{diameter}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{edges}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_geo}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_gpx}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_gpx\_track}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_ldb}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_poly}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_sdf}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{export\_spline}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{extract\_coastline}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{first\_point}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{flat}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{generate\_four\_colour\_index}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{import\_geo}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{import\_poly}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{join\_lines}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{last\_point}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{length}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{length2}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{line2point}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{link\_lines}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{make\_clockwise}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{merge}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{merge2}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{padd\_nan}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{plot}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{points}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{polygon\_boundary}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{read}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{readZ}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{remove\_duplicate\_points}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{remove\_leaves}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{remove\_nan}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{remove\_polygon\_closure}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{remove\_short\_elements}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{renumber}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{resample}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{resample\_2}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{resample\_min}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{resample\_quick}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{scale}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{segment}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{select\_for\_refinement}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{set\_geometry}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{set\_resolution}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{skip}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{smooth}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{split\_jump}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{split\_line}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{split\_nan}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{swap\_hemisphere}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{translate}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{write}
${}$
\begin{lstlisting}

\end{lstlisting}
\section{shapefile}
\subsection{astar\_multi}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{astar\_recursive}
${}$
\begin{lstlisting}
 astar path finding algorithm

\end{lstlisting}
\subsection{edge\_chain}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{edge\_from\_bnd}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{preload\_shp}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{read\_gpx}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{shapewrite\_\_}
${}$
\begin{lstlisting}
 Copyright (C) 2014,2015 Philip Nienhuis
 
 This program is free software; you can redistribute it and/or modify it
 under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 3 of the License, or
 (at your option) any later version.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
 -*- texinfo -*- 
 @deftypefn {Function File} {@var{status} =} shapewrite (@var{shpstr}, @var{fname})
 Write contents of map- or geostruct to a GIS shape file.

 @var{shpstr} must be a valid mapstruct or geostruct, a struct array with an
 entry for each shape feature, with fields Geometry, BoundingBox, and X and Y
 (mapstruct) or Lat and Lon (geostruct).  For geostructs, Lat and Lon field
 data will be written as X and Y data.  Field Geometry can have data values
 of 'Point', 'MultiPoint', 'Line', or 'Polygon', all case-insensitive.  For
 each shape feature, field BoundingBox should contain the minimum and maximum
 (X,Y) coordinates in a 2x2 array [minX, minY; maxX, maxY].  The X and Y
 fields should contain X (or Latitude) and Y (or Longitude) coordinates for
 each point or vertex as row vectors; for polylines and polygons vertices of
 each subfeature (if present) should be separated by NaN entries.

 @var{fname} should be a valid shape file name, optionally with a '.shp'
 suffix.

 shapewrite produces 2 or 3 files, i.e. a .shp file (the actual shape file),
 a .shx file (index file), and if @var{shpstr} contained additional fields,
 a .dbf file (dBase type 3) with the contents of those additional fields.

 @var{status} is 1 if the shape file set was written successfully, 0
 otherwise.

 @seealso{shaperead, shapeinfo}
 @end deftypefn
 Author: Philip Nienhuis <prnienhuis@users.sf.net>
 Created: 2014-12-30
 Input validation
 Assess shape variable type (oct or ml/geo ml/map)
 Yep. Find out what type
 Assume it is an Octave-style struct read by shaperead
 Assume it is a Matlab-style mapstruct
 Assume it is a Matlab-style geostruct
 Not a supported struct type
 Check file name
 Later on bname.shx and bname.dbf will be read
 Prepare a few things
 Change Lat/Lon fields into X/Y
 Only now (after input checks) open .shp and .shx files & rewind just to be sure
 Write headers in .shp & .shx (identical). First magic number 9994 + 5 zeros
 In between here = filelength in 16-bit words (single). For .shx it's known
 Next, shp file version
 Shape feature type
 Bounding box. Can be run later for ML type shape structs. Fill with zeros
 Skip to start of first record position
 Write shape features one by one
 Write record start pos to .shx file
 Write record contents
 Point
 Record index number
 Record length (fixed)
 Shape type
 Simply write XY cordinates
 MultiPoint
 Record index number
 Record length
 Shape type
 Bounding box
 Nr of points
 Polyline/-gon
 Record index number
 Prepare multipart polygons
 Augment idx for later on, & this trick eliminates trailing NaN rows
 Record length
 Shape type
 Bounding box
 Number of parts, number of points, part pointers
 Write file length into .shp header
 Close files
 Check for dbfwrite function
 Write rest of attributes
 Attributes + shp data in mapstruct
 Attributes + shp data in geostruct

\end{lstlisting}
\subsection{shapewrite\_man}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{shp2geo}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{shp2kml}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{shp\_plot\_attribute}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{split\_section}
${}$
\begin{lstlisting}

\end{lstlisting}
\subsection{write\_polygon}
${}$
\begin{lstlisting}

\end{lstlisting}
\end{document}
